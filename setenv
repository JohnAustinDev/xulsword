#!/bin/bash
# Source this script from the current directory with 'source ./setenv' to
# properly set environment variables. Comments indicate each variable
# and their default value.

# WEBAPP_DOMAIN_AND_PORT='http://localhost:1212'

# WEBAPP_SERVERROOT=[xulsword]/webapp/web

# WEBAPP_PORT=3576

# The full path to private directory where web app files are written and read.
# WEBAPP_FILES=[xulsword]/webapp

# Semicolon delimited list of public URLs relative to WEBAPP_SERVERROOT; each starting with slash.
# WEBAPP_PUBPATHS=/

# The public URL on the web app server where webpacked files are served from.
# WEBAPP_PUBLIC_DIST=/

# RESOURCEDIR=[xulsword]/webapp/web/resources

# XSFonts=[xulsword]/webapp/web/resources/fonts

# XSAudio=[xulsword]/webapp/web/resources/audio

# XSModsUser=[xulsword]/webapp/web/resources

# XSModsCommon=[HOME]/.sword

# LogDir=[xulsword]/webapp/logs

# Possible values are 'error', 'warn', 'info', 'verbose', 'debug', 'silly'
# LOGLEVEL='debug'

###############################################################################
# libxulsword Cpp build environment variables:
###############################################################################

export LD_LIBRARY_PATH="./Cpp/lib"

export LIBXULSWORD_MAJOR=1
export LIBXULSWORD_MINOR=5
export LIBXULSWORD_REVIS=6

if [[ -z "$LIBXULSWORD_ONLY" ]]; then
  export LIBXULSWORD_ONLY=no
fi

if [ -e /vagrant ]; then export CONTEXT="guest"; else export CONTEXT="host"; fi
export XULSWORD="$( pwd -P )"
export CPP="$XULSWORD/Cpp"
export LIBXULSWORD="$XULSWORD/build/app/node_modules/libxulsword"

# Set WINMACHINE to x86 or x64 to compile Windows 32 bit or 64 bit, respectively.
# Or set to 'no' to skip compile for windows.
if [[ -z "$WINMACHINE" ]]; then
  export WINMACHINE=x86
fi
export TOOLCHAIN_PREFIX=i686-w64-mingw32
export ADDRESS_MODEL=32
if [ "$WINMACHINE" = "x64" ]; then
  export ADDRESS_MODEL=64
  export TOOLCHAIN_PREFIX=x86_64-w64-mingw32
fi

export XCWD="${ADDRESS_MODEL}win"

# The ming-gcc cross-compiler standard must be 'posix' to work with NodeAPI:
export GCCSTD=posix
