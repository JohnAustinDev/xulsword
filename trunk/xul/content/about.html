<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--
    This file is part of xulSword.

    Copyright 2009 John Austin (gpl.programs.info@gmail.com)

    xulSword is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 2 of the License, or
    (at your option) any later version.

    xulSword is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with xulSword.  If not, see <http://www.gnu.org/licenses/>.
!-->
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="PSPad editor, www.pspad.com">
  <title>About</title>
  <link rel="stylesheet" href="chrome://xulsword/skin/global-htm.css" type="text/css">
  <link rel="stylesheet" href="chrome://xulsword/skin/about-htm.css" type="text/css">
  
  <script>var MainWindow = (window.frameElement.ownerDocument.defaultView.MainWindow ? window.frameElement.ownerDocument.defaultView.MainWindow:null)</script>
  <script type="text/javascript" src="chrome://xulsword/content/common0.js"></script>
  <script type="text/javascript" src="chrome://xulsword/content/common1.js"></script>
  <script type="text/javascript" src="chrome://xulsword/content/common2.js"></script>
  
  <script>
  
  function scrollToModule() {
    if (!MainWindow || !MainWindow.AboutScrollTo) return;
    var targ = document.getElementById("targ." + MainWindow.AboutScrollTo);
    if (targ) document.getElementById("scrollbox").scrollTop = targ.offsetTop;
    MainWindow.AboutScrollTo = null;
  }
  
  function toggleConfInfo(tabNum) {
    var textbox = document.getElementById("conf." + Tabs[tabNum].modName);
    var link = document.getElementById("more." + Tabs[tabNum].modName);
    if (textbox.style.display != "block") {
      link.innerHTML = SBundle.getString("Less");
      textbox.innerHTML = getConfFileContents(tabNum);
      textbox.style.display = "block";
    }
    else {
      textbox.style.display = "none";
      link.innerHTML = SBundle.getString("More");
    }
  }
    
  function getConfFileContents(tabNum) {
    if (!Tabs[tabNum].conf) return "-----";
    return readFile(Tabs[tabNum].conf) + NEWLINE + "(" + Tabs[tabNum].conf.path + ")\nconfModUnique=" + Tabs[tabNum].confModUnique;
  }
  
  function onLoad() {
    createVersionClasses();
    window.setTimeout('scrollToModule();', 0);
  }
    
  </script>
  
  </head>
  
  <body id="scrollbox" onload="onLoad();" style="background-color:rgb(220,220,220)">
    <div style="padding:20px;" class="moduleinfo" >
      <script>
        document.write("<a href=\"#top\"></a>");
        // module list
        var lastType;
        var sep = "";
        for (var t=0; t<Tabs.length; t++) {
          if (!lastType || Tabs[t].modType!=lastType) {
            var type = window.frameElement.ownerDocument.getElementById("radio.label." + TYPES[Tabs[t].tabType]).childNodes[0].nodeValue;
            document.write(sep + "<div class=\"head1 cs-Program\">" + type + "</div>");
            sep = "<br><br>";
          }
          lastType = Tabs[t].modType;
          var desc = Bible.getModuleInformation(Tabs[t].modName, "Description");
          document.write("<div class=\"cs-" + (isASCII(desc) ? "ASCII":Tabs[t].modName) + "\" >");
          document.write("<a href=\"#" + Tabs[t].modName + "\">" + Tabs[t].label + " - " + desc + "</a><hr>");
          document.write("</div>");
        }
        document.write("<br><br>");
        // module information
        for (t=0; t<Tabs.length; t++) {
          // anchor
          document.write("<a id=\"targ." + Tabs[t].modName + "\" name=\"" + Tabs[t].modName + "\"></a><br>");
          document.write("<div id=\"modinfo." + Tabs[t].modName + "\" >");
          // tab label, version, and back arrow
          // collect module data first, and if data is ASCII, overwrite version class style to force LTR.
          var mdata1, mdata2, mdata3;
          var modvers = Bible.getModuleInformation(Tabs[t].modName, "Version");
          if (modvers == NOTFOUND) modvers="";
          if (modvers) modvers = " (" + modvers + ")";
          mdata2 = "<span class=\"head1\">" + Tabs[t].label + (modvers ? modvers:"") + "</span><a href=\"#top\" style=\"font-family:ariel;\"> &#8593;</a><br>";
          // Data for each module:
          //    Description
          //    About, DistributionLicense
          mdata3 = "";
          var info = Bible.getModuleInformation(Tabs[t].modName,"Description");
          if (info && info!=NOTFOUND) mdata3 = info + "<br>";
          info = Bible.getModuleInformation(Tabs[t].modName,"About").replace("\\par", "<br>", "g");
          var comma="";
          if (info && info!=NOTFOUND) {
            mdata3 += info;
            if (info.search(/[\.\?,:;!]\s*$/)==-1) {comma=",";}
            comma += " ";
          }
          info = Bible.getModuleInformation(Tabs[t].modName,"DistributionLicense");
          if (info && info!=NOTFOUND) mdata3 += comma + info;
          mdata3 += "</div>";
          mdata1 = "<div class=\"cs-" + (isASCII(mdata3) ? "ASCII":Tabs[t].modName) + "\" >";
          document.write(mdata1 + mdata2 + mdata3);

          // more link and conf file area
          document.write("<a id=\"more." + Tabs[t].modName + "\" class=\"cs-Program\" href=\"javascript:toggleConfInfo('" + t + "');\">" + SBundle.getString("More") + "</a>");
          document.write("<textarea id=\"conf." + Tabs[t].modName + "\" class=\"moreinfo cs-en-US\" readonly=\"readonly\" ></textarea>");
          document.write("</div>");
        }
      </script>
    </div>
  </body>
</html>
