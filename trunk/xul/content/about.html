<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--
    This file is part of xulSword.

    Copyright 2009 John Austin (gpl.programs.info@gmail.com)

    xulSword is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 2 of the License, or
    (at your option) any later version.

    xulSword is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with xulSword.  If not, see <http://www.gnu.org/licenses/>.
!-->
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="PSPad editor, www.pspad.com">
  <title>About</title>
  <link rel="stylesheet" href="chrome://xulsword/skin/global-htm.css" type="text/css">
  <link rel="stylesheet" href="chrome://xulsword/skin/about-htm.css" type="text/css">
  
  <script>var MainWindow = window.frameElement.ownerDocument.defaultView.MainWindow;</script>
  <script type="text/javascript" src="chrome://xulsword/content/common0.js"></script>
  <script type="text/javascript" src="chrome://xulsword/content/common1.js"></script>
  <script type="text/javascript" src="chrome://xulsword/content/common2.js"></script>
  
  <script>
  
  function onLoad() {
    initCSS();
    
    if (!MainWindow.GlobalTarget.mod) return;
    
    // show our module's info rather than the logo
    document.getElementById("mainbox").setAttribute("showingModules", "true");
    document.getElementById("mod." + MainWindow.GlobalTarget.mod).scrollIntoView();
  }
  
  function toggleInfo(elem) {
    var showInfo = elem.getAttribute("showInfo");
    var mod = elem.id.match(\.([^\.]+)$)[1];
    
    if (showInfo == "false") {
      var confinfo = "-----";
      if (Tab[mod].conf) {
        confinfo  = readFile(Tab[mod].conf) + NEWLINE;
        confinfo += "(" + Tab[mod].conf.path + ")" + NEWLINE;
        confinfo += "confModUnique=" + Tab[mod].confModUnique;
      }
      elem.getElementsByTagName("textarea")[0].innerHTML = confinfo;
    }
    
    elem.setAttribute("showInfo", (showInfo == "true" ? "false":"true"));
  }
  
  function getUI(id) {
    return window.frameElement.ownerDocument.getElementById(id).childNodes[0].nodeValue;
  }
    
  </script>
  
  </head>
  
  <body id="scrollbox" onload="onLoad();">
    <script>
    
      document.write("<a href=\"#top\"></a>");
      
      // begin with quick module list
      var lastType;
      document.write("<div id=\"quick-list\">");
      for (var t=0; t<Tabs.length; t++) {
      
        if (!lastType || Tabs[t].modType != lastType) {
          var type = getUI("radio.label." + TYPES[Tabs[t].tabType]);
          document.write(sep + "<div class=\"mod-heading cs-Program\">" + type + "</div>");
        }
        lastType = Tabs[t].modType;
        
        document.write("<a class=\"quick-link cs-" + Tabs[t].locName + "\" href=\"#" + Tabs[t].modName + "\">");
        document.write(Tabs[t].label + " - " + Tabs[t].description);
        document.write("</a>");
        
      }
      document.write("</div>"); // end quick-list
      
      
      // now show detailed module listing
      document.write("<div id=\"detailed-list\">");
      for (t=0; t<Tabs.length; t++) {
        
        // Target link
        document.write("<a id=\"mod." + Tabs[t].modName + "\" name=\"" + Tabs[t].modName + "\"></a>");
        
        // Heading and version
        var vers = LibSword.getModuleInformation(Tabs[t].modName, "Version");
        document.write("<div class=\"module-detail cs-" + Tabs[t].locName + "\">");
        document.write(  "<span class=\"mod-heading\">");
        document.write(    Tabs[t].label + (vers != NOTFOUND ? "(" + vers + ")":""));
        document.write(  "</span>");
        document.write(  "<a href=\"#top\" class=\"return-link\"></a>");
        
        // Descripton
        if (Tabs[t].description) 
            document.write("<div class=\"description\">" + Tabs[t].description + "</div>");
 
        // About
        var about = LibSword.getModuleInformation(Tabs[t].modName,"About");
        if (about == Tabs[t].description || about == NOTFOUND) about = "";
        if (about) {
          about = about.replace(/\\par/g, "<br>");
          document.write("<div class=\"about\">" + about + "</div>");
        }
        
        // Copyright
        var copyright = LibSword.getModuleInformation(Tabs[t].modName, "DistributionLicense");
        if (copyright == NOTFOUND) copyright = "";
        if (copyright)
             document.write("<div class=\"copyright\">" + copyright + "</div>");
             
        document.write("</div>"); // end module-detail
             
        // Conf contents
        document.write("<div id=\"conf." + Tabs[t].modName + "\" class=\"conf-listing cs-" + DEFAULTLOCALE + "\">");
        document.write(  "<a class=\"more-less\" href=\"javascript:toggleInfo(this.parentNode);\">");
        document.write(    "<span class=\"more-label\">" + getUI(more.label) + "</span>");
        document.write(    "<span class=\"less-label\">" + getUI(less.label) + "</span>");
        document.write(  "</a>");
        document.write(  "<textarea class=\"conf-file\" readonly=\"readonly\"></textarea>");
        document.write("</div>");

      }
      document.write("</div>"); // end detailed-list
      
    </script>
    
  </body>
</html>
