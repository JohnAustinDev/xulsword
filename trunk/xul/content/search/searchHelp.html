<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--
    This file is part of xulSword.

    Copyright 2009 John Austin (gpl.programs.info@gmail.com)

    xulSword is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 2 of the License, or
    (at your option) any later version.

    xulSword is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with xulSword.  If not, see <http://www.gnu.org/licenses/>.
!-->

<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="searchHelp-window" content="PSPad editor, www.pspad.com">
  <title>searchHelp-window</title>
  <link rel="stylesheet" href="chrome://xulsword/skin/common/global-htm.css" type="text/css">
  <link rel="stylesheet" href="chrome://xulsword/skin/search/searchHelp-htm.css" type="text/css">
  </head>
  
  <script>var MainWindow = null;</script>
  <script src="chrome://xulsword/content/common/common0.js" type="text/javascript"></script>
  <script src="chrome://xulsword/content/common/common1.js" type="text/javascript"></script>
  <script>
	var SearchBundle = Components.classes["@mozilla.org/intl/stringbundle;1"]
      .getService(Components.interfaces.nsIStringBundleService)
      .createBundle("chrome://xulsword/locale/search/search.properties");
	
	function onLoad() {
		initCSS();
		window.frameElement.ownerDocument.defaultView.innerHeight = document.getElementById("helpPane").scrollHeight + 20;
		document.getElementsByTagName("body")[0].style.overflow = "auto"; // only allow scroll bar after proper sizing
  }
  
  function writeSearchHelp() {
		var rows = [null, "MULTICharWildCard", "SINGLECharWildCard", "AND", "OR", "NOT", "GROUPSTART", "SIMILAR", "QUOTESTART"];
    var BUNDLESVC = Components.classes["@mozilla.org/intl/stringbundle;1"].getService(Components.interfaces.nsIStringBundleService);
    var bundle = BUNDLESVC.createBundle("chrome://xulsword/locale/search/search-help.properties");
    
    window.frameElement.ownerDocument.title = fixWindowTitle(bundle.GetStringFromName("windowTitle"));

    document.write("<div class='searchTypes'>" + bundle.GetStringFromName("searchTypes") + "</div>");
    document.write("<div class='desc'>");
    document.write("<div><div class='typeName'>" + dString(1) + ") " + bundle.GetStringFromName("hasthewords") + ": </div>");
    document.write(     "<div class='typeDesc'>"    + bundle.GetStringFromName("contains_the_words_desc") + "</div></div>");
    document.write("<div><div class='typeName'>" + dString(2) + ") " + bundle.GetStringFromName("hasthistext") + ": </div>");
    document.write(     "<div class='typeDesc'>"    + bundle.GetStringFromName("contains_exact_text_desc") + "</div></div>");
    document.write("<div><div class='typeName'>" + dString(3) + ") " + bundle.GetStringFromName("advancedmatch") + ": </div>");
    document.write(     "<div class='typeDesc'>"    + bundle.GetStringFromName("using_special_search_terms_desc") + "</div></div>");
    document.write("<div><div class='typeName'>" + dString(4) + ") " + bundle.GetStringFromName("matchparts") + ": </div>");
    document.write(     "<div class='typeDesc'>"    + bundle.GetStringFromName("contains_similar_words_desc") + "</div></div>");
    document.write("</div>");
    
    // use a table to display search help text
    document.write("<table><tbody>");
    for (var r=0; r<9; r++) {
      document.write("<tr class=\"" + (r%2 == 1 ? "odd-row":"even-row") + "\">");
      for (var c=0; c<4; c++) {
        if (c > 0 || r == 0) {
					var lstring = bundle.GetStringFromName("searchTable_" + r + "_" + c);
				}
        else {
					lstring = getSpecialSearchChar(rows[r]);
					if ((/START$/).test(rows[r])) {
						lstring += " " + getSpecialSearchChar(rows[r].replace("START", "END"));
					}
				}
				document.write("<td class=\"col" + c + " row" + r + "\">" + lstring + "</td>");
      }
      document.write("</tr>");
    }
    document.write("</tbody></table>");
    
    document.write("<div id=\"caseMessage\">" + bundle.GetStringFromName("searchCase") + "</div>");
  }
  
  function getSpecialSearchChar(name) {
		try {var schar = SearchBundle.GetStringFromName(name);}
		catch (er) {schar = "";}
		
		if (!schar || (/^\s*$/).test(schar)) {
			schar = LOCALE_SEARCH_SYMBOLS[name];
		}
		
		return schar;
	}
  
  </script>
  
  <body onload="window.setTimeout('onLoad();', 0);">
    <div id="helpPane">
      <script>writeSearchHelp();</script>
    </div>
  </body>
  
</html>
