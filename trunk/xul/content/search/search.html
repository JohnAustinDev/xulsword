<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--
    This file is part of xulSword.

    Copyright 2009 John Austin (gpl.programs.info@gmail.com)

    xulSword is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 2 of the License, or
    (at your option) any later version.

    xulSword is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with xulSword.  If not, see <http://www.gnu.org/licenses/>.
!-->

<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="PSPad editor, www.pspad.com">
  <title>Search Frame</title>
  <link rel="stylesheet" href="chrome://xulsword/skin/common/global-htm.css" type="text/css">
  <link rel="stylesheet" href="chrome://xulsword/skin/search/search-htm.css" type="text/css">

  <script>
    var Watcher = Components.classes["@mozilla.org/embedcomp/window-watcher;1"].getService(Components.interfaces.nsIWindowWatcher); 
    var MainWindow = Watcher.getWindowByName("xulsword-window", window);
  </script>
  
  <script src="chrome://xulsword/content/common/common0.js" type="text/javascript"></script>
  <script src="chrome://xulsword/content/common/common1.js" type="text/javascript"></script>
  <script src="chrome://xulsword/content/common/common2.js" type="text/javascript"></script>
  
  <script>
    
  function load() {
    if (document !== MainWindow.document.getElementById("printBrowser").contentDocument) return;
  
    // then we are printing...
    document.getElementsByTagName("body")[0].setAttribute("print", "true");
    MainWindow.printBrowserLoaded();
  }

  function scriptDblClick(e) {

    // Get module this event occurred in
    var mod = window.frameElement.ownerDocument.defaultView.Search.result.translate;
    
    // Get selected text
    var selob = window.getSelection();
    var sel = selob.toString();
    sel = cleanDoubleClickSelection(sel);
    if (!sel || sel.search(/^\s*$/)!=-1) return; //return of nothing or white-space

    // Do a search for selected word in mod. Use cmd_xs_search because 
    // its much faster than cmd_xs_searchForSelection and can be used
    // because our selection is only a single word.
    MainWindow.XulswordController.doCommand("cmd_xs_search", { search:{ mod:mod, searchtext:sel, type:"SearchAnyWord" }});
    
    e.stopPropagation(); // block any higher handlers
  }

  </script>

  </head>
  
  <body class="searchres" print="false" onload="initCSS(true); load();" ondblclick="scriptDblClick(event);">
    
    <div id="search-content" hasLexicon="false">
      
      <div id="lexiconBox" ></div>
    
      <div id="searchBox"></div>
    
    </div>
    
  </body>
  
</html>
